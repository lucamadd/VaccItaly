<html>

<head>
  <!-- Standard Meta -->
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <!-- Site Properties -->
  <title>Profilo</title>
  <link rel="shortcut icon" href="{{ url_for('static', filename = 'favicon.ico') }}" />
  <!-- You MUST include jQuery before Fomantic -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.7/dist/semantic.min.css">
  <script src="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.7/dist/semantic.min.js"></script>

  <style type="text/css">
    .hidden.menu {
      display: none;
    }



    .ui.vertical.stripe {
      padding: 8em 0em;
    }

    .ui.vertical.stripe h3 {
      font-size: 2em;
    }

    .ui.vertical.stripe .button+h3,
    .ui.vertical.stripe p+h3 {
      margin-top: 3em;
    }

    .ui.vertical.stripe .floated.image {
      clear: both;
    }

    .ui.vertical.stripe p {
      font-size: 1.33em;
    }

    .ui.vertical.stripe .horizontal.divider {
      margin: 3em 0em;
    }

    .quote.stripe.segment {
      padding: 0em;
    }

    .quote.stripe.segment .grid .column {
      padding-top: 5em;
      padding-bottom: 5em;
    }

    .footer.segment {
      padding: 5em 0em;
    }

    .secondary.pointing.menu .toc.item {
      display: none;
    }

    @media only screen and (max-width: 700px) {
      .ui.fixed.menu {
        display: none !important;
      }

      .secondary.pointing.menu .item,
      .secondary.pointing.menu .menu {
        display: none;
      }

      .secondary.pointing.menu .toc.item {
        display: block;
      }

      .masthead.segment {
        min-height: 350px;
      }

      .masthead h1.ui.header {
        font-size: 2em;
        margin-top: 1.5em;
      }

      .masthead h2 {
        margin-top: 0.5em;
        font-size: 1.5em;
      }
    }
  </style>
  <script>
    $(document)
      .ready(function () {
        $('.ui.dropdown').dropdown({
          on: 'hover',
          allowCategorySelection: true
        });

        // create sidebar and attach to menu open
        $('.ui.sidebar')
          .sidebar('attach events', '.toc.item')
          ;
          if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){
            // true for mobile device
            $('.ui.secondary.vertical.pointing.fluid.menu').removeClass('pointing');
          }
          if (getUrlParameter('deleted') == 'False'){
        $('body')
  .toast({
    displayTime: 0,
    closeIcon: true,
    message: "C'è stato un problema con l'eliminazione dell'account."
  })
;
          }
      });
      var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = window.location.search.substring(1),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return typeof sParameterName[1] === undefined ? true : decodeURIComponent(sParameterName[1]);
        }
    }
    return false;
};
      function load_page(){
        $.ajax({
                type: 'POST',
                url: "{{ url_for('get_totale_vaccini') }}",
                data: {},
                success: function(data){
                  $('#vaccini_abruzzo').children().children().val(data[0][1]);
                  $('#vaccini_basilicata').children().children().val(data[1][1]);
                  $('#vaccini_calabria').children().children().val(data[2][1]);
                  $('#vaccini_campania').children().children().val(data[3][1]);
                  $('#vaccini_emiliaromagna').children().children().val(data[4][1]);
                  $('#vaccini_friuliveneziagiulia').children().children().val(data[5][1]);
                  $('#vaccini_totale').html('<b>' + data[6][1] + '</b>');
                  $('#vaccini_lazio').children().children().val(data[7][1]);
                  $('#vaccini_liguria').children().children().val(data[8][1]);
                  $('#vaccini_lombardia').children().children().val(data[9][1]);
                  $('#vaccini_marche').children().children().val(data[10][1]);
                  $('#vaccini_molise').children().children().val(data[11][1]);
                  $('#vaccini_piemonte').children().children().val(data[12][1]);
                  $('#vaccini_pabolzano').children().children().val(data[13][1]);
                  $('#vaccini_patrento').children().children().val(data[14][1]);
                  $('#vaccini_puglia').children().children().val(data[15][1]);
                  $('#vaccini_sardegna').children().children().val(data[16][1]);
                  $('#vaccini_sicilia').children().children().val(data[17][1]);
                  $('#vaccini_toscana').children().children().val(data[18][1]);
                  $('#vaccini_umbria').children().children().val(data[19][1]);
                  $('#vaccini_valledaosta').children().children().val(data[20][1]);
                  $('#vaccini_veneto').children().children().val(data[21][1]);
                  $('.ui.dimmer').removeClass().addClass('ui inverted dimmer');
                },
                error: function(data) {
                  console.log(data)
                  $('.ui.dimmer').removeClass().addClass('ui inverted dimmer');
                }
            });
            $.ajax({
                type: 'POST',
                url: "{{ url_for('get_dettagli_utente') }}",
                data: {},
                success: function(data){
                  console.log(data)
                  $('#data_prenotazione').html('<b>Data prenotazione: </b>' + data['data_prenotazione']);
                  $('#asl_riferimento').html('<b>ASL di riferimento: </b>' + data['asl_riferimento']);
                  $("input[name=CF]").val(data['cod_fis']);
                  $("input[name=email]").val(data['email']);
                  $("input[name=nome]").val(data['nome']);
                  $("input[name=cognome]").val(data['cognome']);
                  $("input[name=data_nascita]").val(data['data_nascita']);
                  $("input[name=luogo_nascita]").val(data['luogo_nascita']);
                  $("input[name=regione]").val(data['regione']);
                  $('.ui.dimmer').removeClass().addClass('ui inverted dimmer');
                },
                error: function(data) {
                  console.log(data)
                  $('.ui.dimmer').removeClass().addClass('ui inverted dimmer');
                }
            });
            $.ajax({
                type: 'POST',
                url: "{{ url_for('get_num_prenotazioni') }}",
                data: {},
                success: function(data){
                  console.log(data)
                  $('#prenotazioni_in_attesa').html(numberFormat(data['in_attesa']));
                  $('#prenotazioni_completate').html(numberFormat(data['completate']));
                  $('#prenotazioni_tot').html(numberFormat(data['in_attesa'] + data['completate']));
                  $('#card_dimmer').removeClass('active');
                },
                error: function(data) {
                  console.log(data)
                  $('#card_dimmer').removeClass('active');
                }
            });
      }
      load_page();
  </script>
</head>

<body class="pushable">
  
  <!-- Following Menu -->
  <div class="ui large top fixed visible menu">
    <div class="ui container">
      <a class="item" href="{{ url_for('index') }}">Home</a>
      <a class="item">Campagna vaccinale</a>
      <a class="item">Info</a>
      <div class="right menu">
        <div class="ui dropdown item" onclick="window.location.href='#'">
          {{ session['nome'] }} <i class="dropdown icon" ></i>
          <div class="menu">
            <a class="item" href="{{ url_for('logout') }}">Logout</a>
          </div>
        </div>
      </div>
    </div>
  </div>


  <!-- Sidebar Menu -->
  <div class="ui vertical inverted sidebar menu left">
    <a class="item" href="{{ url_for('index') }}">Home</a>
    <a class="item">Campagna vaccinale</a>
    <a class="item">Info</a>
    <a class="item" href="{{ url_for('login') }}">Login</a>
    <a class="item" href="{{ url_for('register') }}">Registrati</a>
  </div>


  <!-- Page Contents -->
  <div class="pusher">
    <div class="ui container">
      <div class="ui tiny primary menu">
        <a class="toc item">
          <i class="sidebar icon"></i>
        </a>
        <a class="item" href="{{ url_for('index') }}">Home</a>
        <a class="item">Campagna vaccinale</a>
        <a class="item">Info</a>
        <div class="ui right dropdown item">
          <a class="ui inverted button" href="{{ url_for('login') }}">Login</a>
          <a class="ui inverted button" href="{{ url_for('register') }}">Registrati</a>
        </div>
      </div>
    </div>

    {% if session['cod_fis'] == 'global_admin' %}
    <h4 class="ui horizontal divider header" style="margin-top: 2em; margin-bottom: 2em;">
      <i class="user cog icon"></i>
      Pannello di amministrazione
    </h4>
    <div class="ui container">
      
      <div class="ui mobile reversed grid">
        <div class="four wide computer only column">
          <div class="ui secondary vertical pointing fluid menu">
            <a id="left_menu_first_button" class="item active">
              Vaccini
              <i class="syringe icon"></i>
            </a>
            <a id="left_menu_second_button" class="item">
              Amministratori regionali
              <i class="user cog icon"></i>
            </a>
          </div>
          <div class="ui card" style="margin-top: 6em;">
            <div id="card_dimmer" class="ui active inverted dimmer">
              <div class="ui loader"></div>
            </div>
            <div class="content">
              <div class="header">Prenotazioni</div>
              <div class="description">
                <span id="prenotazioni_in_attesa" class="right floated time"></span>
                <span class="category">In attesa</span>
              </div>
              <div class="description">
                <span id="prenotazioni_completate" class="right floated time"></span>
              <span class="category">Completate</span>
              </div>
            </div>
            <div class="extra content">
              <div class="meta">
                <span id="prenotazioni_tot" class="right floated time"></span>
                <span class="category">Totale</span>
              </div>
            </div>
          </div>
        </div>
        
        <div id="div_vaccini" class="sixteen wide mobile twelve wide computer column" style="display: block; margin-top: -1em;">
          <div class="ui active inverted dimmer">
            <div class="ui loader"></div>
          </div>
          <table id="tab_vaccini" class="ui compact celled unstackable table">
            
            <thead>
              <tr><th>Regione</th>
              <th>N° ASL</th>
              <th class="three wide">Vaccini disponibili</th>
              <th class="two wide">Modifica</th>
            </tr></thead>
            <tbody>
              <tr>
                <td data-label="Regione">Abruzzo</td>
                <td data-label="N° ASL">4</td>
                <td id="vaccini_abruzzo" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_abruzzo_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Basilicata</td>
                <td data-label="N° ASL">2</td>
                <td id="vaccini_basilicata" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_basilicata_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Calabria</td>
                <td data-label="N° ASL">5</td>
                <td id="vaccini_calabria" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_calabria_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Campania</td>
                <td data-label="N° ASL">7</td>
                <td id="vaccini_campania" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_campania_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Emilia Romagna</td>
                <td data-label="N° ASL">8</td>
                <td id="vaccini_emiliaromagna" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_emiliaromagna_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Friuli Venezia Giulia</td>
                <td data-label="N° ASL">5</td>
                <td id="vaccini_friuliveneziagiulia" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_friuliveneziagiulia_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Lazio</td>
                <td data-label="N° ASL">10</td>
                <td id="vaccini_lazio" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_lazio_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Liguria</td>
                <td data-label="N° ASL">5</td>
                <td id="vaccini_liguria" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_liguria_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Lombardia</td>
                <td data-label="N° ASL">8</td>
                <td id="vaccini_lombardia" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_lombardia_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Marche</td>
                <td data-label="N° ASL">1</td>
                <td id="vaccini_marche" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_marche_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Molise</td>
                <td data-label="N° ASL">1</td>
                <td id="vaccini_molise" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_molise_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Piemonte</td>
                <td data-label="N° ASL">12</td>
                <td id="vaccini_piemonte" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_piemonte_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Prov. Auton. Bolzano</td>
                <td data-label="N° ASL">1</td>
                <td id="vaccini_pabolzano" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_pabolzano_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Prov. Auton. Trento</td>
                <td data-label="N° ASL">1</td>
                <td id="vaccini_patrento" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_patrento_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Puglia</td>
                <td data-label="N° ASL">6</td>
                <td id="vaccini_puglia" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_puglia_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Sardegna</td>
                <td data-label="N° ASL">1</td>
                <td id="vaccini_sardegna" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_sardegna_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Sicilia</td>
                <td data-label="N° ASL">9</td>
                <td id="vaccini_sicilia" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_sicilia_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Toscana</td>
                <td data-label="N° ASL">3</td>
                <td id="vaccini_toscana" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_toscana_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Umbria</td>
                <td data-label="N° ASL">2</td>
                <td id="vaccini_umbria" data-label="Vaccini disponibili"><div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div></td>
                <td id="vaccini_umbria_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Valle D'Aosta</td>
                <td data-label="N° ASL">1</td>
                <td id="vaccini_valledaosta" data-label="Vaccini disponibili">
                  <div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div>
                </td>
                <td id="vaccini_valledaosta_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
              <tr>
                <td data-label="Regione">Veneto</td>
                <td data-label="N° ASL">9</td>
                <td id="vaccini_veneto" data-label="Vaccini disponibili">
                  <div class="ui transparent fluid input disabled">
                    <input type="number" value="">
                  </div>
                </td>
                <td id="vaccini_veneto_edit" class="selectable collapsing center aligned" data-label="Modifica">
                  <i class="pen icon"></i>
                </td>
              </tr>
            </tbody>
            <tfoot>
              <tr><th><b>Totale</b></th>
              <th><b>101</b></th>
              <th id="vaccini_totale"><b>67</b></th>
              <th class="collapsing"></th>
            </tr></tfoot>
          </table>
        
        </div>
        <div id="div_amministratori_regionali" class="sixteen wide mobile twelve wide computer column" style="display: none;">
          <table class="ui compact celled unstackable table">
            <thead>
              <tr><th>Regione</th>
              <th>N° ASL</th>
              <th>Amm. regionali</th>
            </tr></thead>
            <tbody>
              <tr>
                <td data-label="Regione">Abruzzo</td>
                <td data-label="N° ASL">4</td>
                <td id="vaccini_abruzzo" data-label="Amm. regionali">35</td>
              </tr>
              <tr>
                <td data-label="Regione">Basilicata</td>
                <td data-label="N° ASL">2</td>
                <td id="vaccini_basilicata" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Calabria</td>
                <td data-label="N° ASL">5</td>
                <td id="vaccini_calabria" data-label="Amm. regionali"></td>
                
              </tr>
              <tr>
                <td data-label="Regione">Campania</td>
                <td data-label="N° ASL">7</td>
                <td id="vaccini_campania" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Emilia Romagna</td>
                <td data-label="N° ASL">8</td>
                <td id="vaccini_emiliaromagna" data-label="Amm. regionali"></td>
                
              </tr>
              <tr>
                <td data-label="Regione">Friuli Venezia Giulia</td>
                <td data-label="N° ASL">5</td>
                <td id="vaccini_friuliveneziagiulia" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Lazio</td>
                <td data-label="N° ASL">10</td>
                <td id="vaccini_lazio" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Liguria</td>
                <td data-label="N° ASL">5</td>
                <td id="vaccini_liguria" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Lombardia</td>
                <td data-label="N° ASL">8</td>
                <td id="vaccini_lombardia" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Marche</td>
                <td data-label="N° ASL">1</td>
                <td id="vaccini_marche" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Molise</td>
                <td data-label="N° ASL">1</td>
                <td id="vaccini_molise" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Piemonte</td>
                <td data-label="N° ASL">12</td>
                <td id="vaccini_piemonte" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Prov. Auton. Bolzano</td>
                <td data-label="N° ASL">1</td>
                <td id="vaccini_pabolzano" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Prov. Auton. Trento</td>
                <td data-label="N° ASL">1</td>
                <td id="vaccini_patrento" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Puglia</td>
                <td data-label="N° ASL">6</td>
                <td id="vaccini_puglia" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Sardegna</td>
                <td data-label="N° ASL">1</td>
                <td id="vaccini_sardegna" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Sicilia</td>
                <td data-label="N° ASL">9</td>
                <td id="vaccini_sicilia" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Toscana</td>
                <td data-label="N° ASL">3</td>
                <td id="vaccini_toscana" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Umbria</td>
                <td data-label="N° ASL">2</td>
                <td id="vaccini_umbria" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Valle D'Aosta</td>
                <td data-label="N° ASL">1</td>
                <td id="vaccini_valledaosta" data-label="Amm. regionali"></td>
              </tr>
              <tr>
                <td data-label="Regione">Veneto</td>
                <td data-label="N° ASL">9</td>
                <td id="vaccini_veneto" data-label="Amm. regionali"></td>
              </tr>
            </tbody>
            <tfoot>
              <tr><th><b>Totale</b></th>
              <th><b>101</b></th>
              <th><b>67</b></th>
            </tr></tfoot>
          </table>
        
        </div>
      </div>
    </div>
    {% else %}
    <h4 class="ui horizontal divider header">
      <i class="user icon"></i>
      Profilo
    </h4>
    <div class="ui container">

      <div class="ui mobile reversed grid">
        <div class="row">
          <div class="sixteen wide mobile four wide computer column">
            <div class="ui secondary vertical pointing fluid menu">
              <a id="left_menu_user_first_button" class="item active">
                Prenotazioni effettuate
                <i class="calendar icon"></i>
              </a>
              <a id="left_menu_user_second_button" class="item">
                Dati personali
                <i class="address card icon"></i>
              </a>
            </div>
          </div>
          <div id="div_prenotazioni" class="sixteen wide mobile twelve wide computer column" style="display: block;">
            <div class="ui active inverted dimmer">
              <div class="ui loader"></div>
            </div>
            {% if reservation == True %}
            <div class="ui last container">
              <div class="ui segment">
               <div class="ui header">
                 <p>Dettagli prenotazione</p>
               </div>
               <div class="ui divider"></div>
               <p id="data_prenotazione"></p>
               <p id="asl_riferimento" style="margin-bottom: 4em;"></p>
               <div class="ui divider"></div>
               <div class="ui three column grid">
                 <div class="row">
                   <div class="column"></div>
                   <div class="column"></div>
                   <div class="right floated column">
                    <div id="annulla_prenotazione" class="right floated ui primary button" >Annulla prenotazione</div>
                   </div>
                 </div>
               </div>
              </div>
            </div>
            {% elif reservation == False %}
            <div class="ui last container">
              <div class="ui placeholder segment">
               <div class="ui icon header">
                 <p>Non hai effettuato ancora una prenotazione</p>
               </div>
               <a href="{{ url_for('reserve') }}" class="ui primary button">Prenota ora</a>
              </div>
            </div>
            {% endif %}
            <p style="margin-top: 3em;">Se riscontri problemi, invia una email a <code style="color: #2185d0;">info.vaccitaly@gmail.com</code>.</p>
          
          </div>
          <div id="div_dati_personali" class="sixteen wide mobile twelve wide computer column" style="display: none;">
            <form class="ui equal width form segment">
              <div class="fields">
                <div class="field">
                  <label>Nome</label>
                  <input placeholder="" readonly="" name="nome" type="text">
                </div>
                <div class="field">
                  <label>Cognome</label>
                  <input placeholder="" readonly="" name="cognome" type="text">
                </div>
              </div>
              <div class="fields">
                  <div class="field">
                      <label>Data di nascita</label>
                      <input placeholder="" readonly="" name="data_nascita" type="text">
                    </div>
                    <div class="field">
                      <label>Luogo di nascita</label>
                      <input placeholder="" readonly="" name="luogo_nascita" type="text" >
                    </div>
                    <div class="field">
                      <label>Codice fiscale</label>
                      <input placeholder="" readonly="" name="CF" type="text" style="text-transform:uppercase">
                    </div>
              </div>
              <div class="fields">
                <div class="field">
                  <label>Regione</label>
                  <input placeholder="Non impostata" readonly="" name="regione" type="text">
                </div>
                <div class="field">
                  <label>Email</label>
                  <input placeholder="" readonly="" name="email" type="email">
                </div>
              </div>
              <div class="ui divider"></div>
               <div class="ui four column grid">
                 <div class="computer only row">
                   <div class="computer only column"></div>
                   <div class="computer only column"></div>
                   <div class="right floated computer column">
                    <div id="cambia_password" class="fluid ui primary button" >Cambia password</div>
                   </div>
                   <div class="right floated computer column">
                    <div id="elimina_account" class="fluid ui red button" >Elimina account</div>
                   </div>
                 </div>
               </div>
               <div class="ui mobile only two column grid">
                <div class="row">
                  <div class="column">
                   <div id="cambia_password" class="fluid ui primary button" >Cambia password</div>
                  </div>
                  <div class=" column">
                   <div id="elimina_account" class="fluid ui red button" >Elimina account</div>
                  </div>
                </div>
              </div>
            </form>
          </div>
          <div id="div_conferma_eliminazione" class="sixteen wide mobile twelve wide computer column" style="display: none;">
            <div class="ui active inverted dimmer">
              <div class="ui loader"></div>
            </div>
            <div class="ui last container">
              <div class="ui placeholder segment" style=" padding-top: 7.4em; padding-bottom: 7.4em;">
                <div class="ui icon header">
                  Vuoi davvero eliminare il tuo account? 
                  <p>Questa è un'operazione irreversibile.</p>
                </div>
                <div class="inline">
                  <div id="delete_account_confirm_button" class="ui red button">Elimina</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    {% endif %}

    {% include 'footer.html' %}
  </div>
</body>
<script>
  $('.selectable.collapsing.center.aligned').click( function(event) {
    var selected = event.currentTarget.id
    selected = selected.substring(0, selected.length - 5);
    //se sto salvando
    if (this.innerHTML == '<i class="save icon"></i>'){
      if ($('#' + selected).children().children().val() < 0 || $('#' + selected).children().children().val() > 60000000){
        $('#' + selected).removeClass().addClass('error');
        $('#' + selected).attr('data-tooltip','Inserisci un valore valido');
      } else {
        $('#' + selected).removeAttr('data-tooltip');
        $('#' + selected).removeClass();
        $('#' + selected).children().removeClass().addClass('ui transparent fluid input disabled')
        event.currentTarget.innerHTML = '<i class="pen icon"></i>'
        $('.ui.dimmer').removeClass().addClass('ui active inverted dimmer');
        $('.pen.icon').parent().removeClass().addClass('selectable collapsing center aligned')
        $.ajax({
            type: 'POST',
            url: "{{ url_for('edit_vaccini') }}",
            data: { 
                'regione': selected.substring(8, selected.length),
                'num_vaccini': $('#' + selected).children().children().val()
            },
            success: function(data){
              console.log(data)
              //$('.ui.dimmer').removeClass().addClass('ui inverted dimmer');
              load_page();
            },
            error: function(data) {
              console.log(data)
            }
        });
      }
    } 
    else { //se sto modificando
      $('#' + selected).children().removeClass().addClass('ui transparent fluid input');
      event.currentTarget.innerHTML = '<i class="save icon"></i>';
      $('.pen.icon').parent().removeClass().addClass('selectable collapsing center aligned disabled');
    }
  });
  $('#left_menu_first_button').click( function() {
    $('#div_amministratori_regionali').css('display','none');
    $('#div_vaccini').css('display','block');
    $('#left_menu_first_button').removeClass().addClass('item active');
    $('#left_menu_second_button').removeClass().addClass('item');
  });
  $('#left_menu_second_button').click( function() {
    $('#div_vaccini').css('display','none');
    $('#div_amministratori_regionali').css('display','block');
    $('#left_menu_first_button').removeClass().addClass('item');
    $('#left_menu_second_button').removeClass().addClass('item active');
  });
  $('#left_menu_user_first_button').click( function() {
    $('#div_dati_personali').css('display','none');
    $('#div_prenotazioni').css('display','block');
    $('#div_conferma_eliminazione').css('display','none');
    $('#left_menu_user_first_button').removeClass().addClass('item active');
    $('#left_menu_user_second_button').removeClass().addClass('item');
  });
  $('#left_menu_user_second_button').click( function() {
    $('#div_prenotazioni').css('display','none');
    $('#div_dati_personali').css('display','block');
    $('#div_conferma_eliminazione').css('display','none');
    $('#left_menu_user_first_button').removeClass().addClass('item');
    $('#left_menu_user_second_button').removeClass().addClass('item active');
  });
  function numberFormat(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
}
$('.fluid.ui.red.button').click( function() {
  $('.ui.dimmer').addClass('active');
  $('#div_dati_personali').css('display','none');
  $('#div_conferma_eliminazione').css('display','block');
  setTimeout(function(){ 
    $('.ui.dimmer').removeClass('active');
  }, 300);
  
});
$('#delete_account_confirm_button').click( function() {
  $('.ui.dimmer').addClass('active');
  $.ajax({
            type: 'POST',
            url: "{{ url_for('delete_account') }}",
            data: { 
                'email': $("input[name=email]").val()
            },
            success: function(data){
              window.location=data.result;
            },
            error: function(data) {
              console.log(data)
            }
        });
});
</script>

</html>